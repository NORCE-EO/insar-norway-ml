{% assign nav_pairs = '' %}
{% for item in site.data.navigation.main %}
  {% capture pair %}{{ item.url }}::{{ item.title | strip }}{% endcapture %}
  {% assign nav_pairs = nav_pairs | append: pair | append: '||' %}
  {% if item.children %}
    {% for child in item.children %}
      {% capture child_pair %}{{ child.url }}::{{ child.title | strip }}{% endcapture %}
      {% assign nav_pairs = nav_pairs | append: child_pair | append: '||' %}
    {% endfor %}
  {% endif %}
{% endfor %}
{% assign nav_list = nav_pairs | split: '||' %}

{% assign current_url = page.url %}
{% assign current_url_no_base = current_url %}
{% if site.baseurl and site.baseurl != '' %}
  {% assign current_url_no_base = current_url | remove_first: site.baseurl %}
{% endif %}

{% assign previous_url = nil %}
{% assign previous_title = nil %}
{% assign next_url = nil %}
{% assign next_title = nil %}
{% assign found = false %}
{% assign first_url = nil %}
{% assign first_title = nil %}
{% for entry in nav_list %}
  {% if entry == '' %}
    {% continue %}
  {% endif %}
  {% assign parts = entry | split: '::' %}
  {% assign entry_url = parts[0] %}
  {% assign entry_title = parts[1] %}
  {% if first_url == nil %}
    {% assign first_url = entry_url %}
    {% assign first_title = entry_title %}
  {% endif %}
  {% assign entry_relative = entry_url | relative_url %}
  {% assign entry_no_base = entry_relative %}
  {% if site.baseurl and site.baseurl != '' %}
    {% assign entry_no_base = entry_relative | remove_first: site.baseurl %}
  {% endif %}
  {% if found and next_url == nil %}
    {% assign next_url = entry_url %}
    {% assign next_title = entry_title %}
    {% break %}
  {% endif %}
  {% if entry_relative == current_url or entry_no_base == current_url or entry_relative == current_url_no_base or entry_no_base == current_url_no_base %}
    {% assign found = true %}
  {% else %}
    {% assign previous_url = entry_url %}
    {% assign previous_title = entry_title %}
  {% endif %}
{% endfor %}
{% unless found %}
  {% if first_url %}
    {% assign next_url = first_url %}
    {% assign next_title = first_title %}
    {% assign previous_url = nil %}
    {% assign previous_title = nil %}
  {% endif %}
{% endunless %}
{% if previous_url or next_url %}
  <nav class="pagination">
    {% if previous_url %}
      <a href="{{ previous_url | relative_url }}" class="pagination--pager" title="{{ previous_title }}">{{ site.data.ui-text[site.locale].pagination_previous | default: "Previous" }}</a>
    {% else %}
      <a href="#" class="pagination--pager disabled">{{ site.data.ui-text[site.locale].pagination_previous | default: "Previous" }}</a>
    {% endif %}
    {% if next_url %}
      <a href="{{ next_url | relative_url }}" class="pagination--pager" title="{{ next_title }}">{{ site.data.ui-text[site.locale].pagination_next | default: "Next" }}</a>
    {% else %}
      <a href="#" class="pagination--pager disabled">{{ site.data.ui-text[site.locale].pagination_next | default: "Next" }}</a>
    {% endif %}
  </nav>
{% endif %}
